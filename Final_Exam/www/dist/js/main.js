!function(t){t.fn.jcarousel=function(e){var i={width:t(".jcarousel__img").width(),height:t(".jcarousel__img").height()},s=t.extend(i,e),o=0,a=t(".jcarousel__item").length/3;0==o&&t(".jcarousel-prev").animate({},500);var n=parseInt(s.width);return t(".jcarousel-list").css({width:a*n+"px",height:s.height,left:o+"px"}),t(".jcarousel").css({width:s.width,height:s.height}),this.on("click",".jcarousel-next",function(e){e.preventDefault(),o>=-a*n+n&&(o-=n,t(this).closest(".jcarousel").children(".jcarousel-list").css("left",o+"px")),-a*n+n>o&&(o=0,t(this).closest(".jcarousel").children(".jcarousel-list").css("left",o+"px"))}),this.on("click",".jcarousel-prev",function(e){e.preventDefault(),0>=o&&(o+=n,t(this).closest(".jcarousel").children(".jcarousel-list").css("left",o+"px")),o>0&&(o=-a*n+n,t(this).closest(".jcarousel").children(".jcarousel-list").css("left",o+"px"))}),this}}(jQuery),$(document).ready(function(){function t(t,e,i){var s="";s=t?t:"holiday","any"==e&&(e=window.innerWidth<=768?"horizontal":"vertical");var o="https://pixabay.com/api/?q="+s+"&orientation="+e+"&image_type=photo&key=2717787-691d61cdcb6847f3180471c5d&per_page=50",a=new XMLHttpRequest;a.open("GET",o,!0),a.send();var n;a.onreadystatechange=function(){4==a.readyState&&(200!=a.status?alert(a.status+": "+a.statusText):(n=JSON.parse(a.responseText),i(n)))}}function e(t){console.log("data.hits",t.hits);for(var e=$("#template").html(),i=_.template(e),s=[],o=0;o<t.hits.length;o++)window.innerWidth>768?t.hits[o].webformatHeight/t.hits[o].webformatWidth>1&&s.push(t.hits[o]):s.push(t.hits[o]);console.log("arr",s),$(".jcarousel-wrapper1").append(i({start:0,count:5,img:s})),$(".jcarousel-wrapper2").append(i({start:5,count:5,img:s})),$(".jcarousel-wrapper3").append(i({start:10,count:5,img:s}));var a=$(".jcarousel");a.each(function(){$(this).jcarousel({})})}function i(t){var e=$("#masonry-template").html(),i=_.template(e);$(".masonry-wrapper").append(i({start:0,count:10,img:t.hits}));var s=$(".grid").isotope({itemSelector:".grid-item",layoutMode:"masonry",masonry:{columnWidth:".grid-img",gutter:20}});s.imagesLoaded().done(function(){s.isotope("layout")})}t("holiday","any",e),t("building","all",i),$(window).resize(function(t){var e=$(".jcarousel");e.each(function(){$(this).jcarousel({})}),console.log("window.innerWidth",window.innerWidth),console.log("window.Width",$(document).width())})});